"use strict";const searchButton=document.querySelector(".js-button"),search=document.querySelector(".js-search"),showcontainer=document.querySelector(".js-showlist"),favoritecontainer=document.querySelector(".js-favoritelist"),showNotFound=document.querySelector(".js-shownotfound"),NotFoundContainer=document.querySelector("js-notFoundContainer");let arrayShows=[],arrayFavorite=[],arrayLocal=[];function renderShows(){let a="";for(const e of arrayShows){a+=void 0!==arrayFavorite.find(a=>a.show.id===e.show.id)?`<li data-id="${e.show.id}" class="js-shows favorite show"> <i class="fas fa-thumbs-up"></i>`:`<li data-id="${e.show.id}" class="js-shows show"> <i class="far fa-thumbs-up"></i>`,null!==e.show.image?a+=`<img class="imagen" src="${e.show.image.medium}" alt="${e.show.name}">`:a+=`<img class="imagen" src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="${e.show.name}">`,a+=`<h2 class="tittle2">${e.show.name}</h2>`,a+="</li>"}showcontainer.innerHTML=a,addListenShow()}function handlerSearch(){const a=search.value.toLowerCase();fetch("//api.tvmaze.com/search/shows?q="+a).then(a=>a.json()).then(a=>{arrayShows=a,0===arrayShows.length?(showcontainer.classList.add("hidden"),showNotFound.classList.remove("hidden")):(showcontainer.classList.remove("hidden"),showNotFound.classList.add("hidden"),renderShows(arrayShows))}).catch(a=>console.log("Inténtalo de nuevo más tarde",a))}function addListenShow(){const a=document.querySelectorAll(".js-shows");for(const e of a)e.addEventListener("click",handleClickFav)}function handleClickFav(a){const e=a.currentTarget,o=parseInt(e.dataset.id);if(void 0===arrayFavorite.find(a=>a.show.id===o)){const a=arrayShows.find(a=>a.show.id===o);arrayFavorite.push(a)}else arrayFavorite=arrayFavorite.filter(a=>a.show.id!==o);renderFavorites(),renderShows(),savedFav()}function renderFavorites(){let a="";for(const e of arrayFavorite)a+='<li class="fav">',null!==e.show.image?a+=`<img class="imagenFav" src="${e.show.image.medium}" alt="${e.show.name}" height="150px">`:a+=`<img class="imagenFav" src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="${e.show.name}" height="150px">`,a+=`<h2 class="fav-tittle2">${e.show.name}</h2>`,a+=` <i data-id="${e.show.id}"  class="js-shows fas fa-trash-alt"></i>`,a+="</li>";favoritecontainer.innerHTML=a,addListenShow()}function savedFav(){localStorage.setItem("favorites",JSON.stringify(arrayFavorite))}function getFavLocal(){let a=localStorage.getItem("favorites");null!==a&&(arrayFavorite=JSON.parse(a),renderFavorites())}searchButton.addEventListener("click",handlerSearch),getFavLocal();
"use strict";const searchButton=document.querySelector(".js-button"),search=document.querySelector(".js-search"),showcontainer=document.querySelector(".js-showlist"),favoritecontainer=document.querySelector(".js-favoritelist"),showNotFound=document.querySelector(".js-shownotfound"),NotFoundContainer=document.querySelector("js-notFoundContainer"),btnResett=document.querySelector(".js-reset");let arrayShows=[],arrayFavorite=[],arrayLocal=[];function renderShows(){let e="";for(const a of arrayShows){e+=void 0!==arrayFavorite.find(e=>e.show.id===a.show.id)?`<li data-id="${a.show.id}" class="js-shows favorite show"> <i class="fas fa-thumbs-up"></i>`:`<li data-id="${a.show.id}" class="js-shows show"> <i class="far fa-thumbs-up"></i>`,null!==a.show.image?e+=`<img class="imagen" src="${a.show.image.medium}" alt="${a.show.name}">`:e+=`<img class="imagen" src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="${a.show.name}">`,e+=`<h2 class="tittle2">${a.show.name}</h2>`,e+="</li>"}showcontainer.innerHTML=e,addListenShow()}function handlerSearch(){const e=search.value.toLowerCase();fetch("//api.tvmaze.com/search/shows?q="+e).then(e=>e.json()).then(e=>{arrayShows=e,0===arrayShows.length?(showcontainer.classList.add("hidden"),showNotFound.classList.remove("hidden")):(showcontainer.classList.remove("hidden"),showNotFound.classList.add("hidden"),renderShows(arrayShows))}).catch(e=>console.log("Inténtalo de nuevo más tarde",e))}function addListenShow(){const e=document.querySelectorAll(".js-shows");for(const a of e)a.addEventListener("click",handleClickFav)}function handleClickFav(e){const a=e.currentTarget,o=parseInt(a.dataset.id);if(void 0===arrayFavorite.find(e=>e.show.id===o)){const e=arrayShows.find(e=>e.show.id===o);arrayFavorite.push(e)}else arrayFavorite=arrayFavorite.filter(e=>e.show.id!==o);renderFavorites(),renderShows(),savedFav()}function renderFavorites(){let e="";for(const a of arrayFavorite)e+='<li class="fav">',null!==a.show.image?e+=`<img class="imagenFav" src="${a.show.image.medium}" alt="${a.show.name}" height="150px">`:e+=`<img class="imagenFav" src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV" alt="${a.show.name}" height="150px">`,e+=`<h2 class="fav-tittle2">${a.show.name}</h2>`,e+=` <i data-id="${a.show.id}"  class="js-shows fas fa-trash-alt"></i>`,e+="</li>";favoritecontainer.innerHTML=e,addListenShow()}function savedFav(){localStorage.setItem("favorites",JSON.stringify(arrayFavorite))}function getFavLocal(){let e=localStorage.getItem("favorites");null!==e&&(arrayFavorite=JSON.parse(e),renderFavorites())}function handlerReset(){arrayFavorite=[],renderFavorites(),renderShows(arrayShows),localStorage.removeItem("favorites")}searchButton.addEventListener("click",handlerSearch),getFavLocal(),btnResett.addEventListener("click",handlerReset);